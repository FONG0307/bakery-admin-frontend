(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,89504,e=>{"use strict";var a=e.i(43476);e.s(["default",0,({type:e="text",className:r="",disabled:t=!1,success:s=!1,error:l=!1,hint:n,...d})=>{let o=`h-11 w-full rounded-lg border appearance-none px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800 ${r}`;return t?o+=" text-gray-500 border-gray-300 cursor-not-allowed dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700":l?o+=" text-error-800 border-error-500 focus:ring-error-500/10 dark:text-error-400 dark:border-error-500":s?o+=" text-success-500 border-success-400 focus:ring-success-500/10 dark:text-success-400 dark:border-success-500":o+=" bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800",(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:e,disabled:t,className:o,...d}),n&&(0,a.jsx)("p",{className:`mt-1.5 text-xs ${l?"text-error-500":s?"text-success-500":"text-gray-500"}`,children:n})]})}])},14080,e=>{"use strict";var a=e.i(43476),r=e.i(71645);e.s(["default",0,({options:e,placeholder:t="Select an option",onChange:s,className:l="",defaultValue:n=""})=>{let[d,o]=(0,r.useState)(n);return(0,a.jsxs)("select",{className:`h-11 w-full appearance-none rounded-lg border border-gray-300  px-4 py-2.5 pr-11 text-sm shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800 ${d?"text-gray-800 dark:text-white/90":"text-gray-400 dark:text-gray-400"} ${l}`,value:d,onChange:e=>{let a=e.target.value;o(a),s(a)},children:[(0,a.jsx)("option",{value:"",disabled:!0,className:"text-gray-700 dark:bg-gray-900 dark:text-gray-400",children:t}),e.map(e=>(0,a.jsx)("option",{value:e.value,className:"text-gray-700 dark:bg-gray-900 dark:text-gray-400",children:e.label},e.value))]})}])},40309,e=>{"use strict";var a=e.i(43476),r=e.i(71645);let t="http://localhost:3001/api";function s(){let e=localStorage.getItem("token");if(!e)throw Error("No auth token");return{"Content-Type":"application/json",Authorization:`Bearer ${e}`}}async function l(){try{let e=await fetch(`${t}/users`,{headers:s()}),a=await e.json();if(console.log("ðŸ”¥ /api/users response:",a),!e.ok)return console.error("GET USERS FAILED:",a),[];if(Array.isArray(a))return a;if(Array.isArray(a.users))return a.users;return console.warn("âš ï¸ Unexpected users response shape:",a),[]}catch(e){return console.error("GET USERS ERROR:",e),[]}}async function n(e){let a=localStorage.getItem("token"),r=await fetch("http://localhost:3001/api/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({user:e})});if(!r.ok){let e=await r.json();throw Error(e.errors?.join(", ")||"Create user failed")}return r.json()}async function d(e){if(!(await fetch(`${t}/users/${e}`,{method:"DELETE",headers:s()})).ok)throw Error("Failed to delete user")}var o=e.i(89504),i=e.i(14080),c=e.i(8776);function u({open:e,onClose:t,onCreated:s}){let{showSuccess:l,showError:d}=(0,c.useToast)(),[u,m]=(0,r.useState)({first_name:"",last_name:"",email:"",phone:"",role:"staff",password:"",password_confirmation:""}),[h,p]=(0,r.useState)(!1),[f,g]=(0,r.useState)(null);function b(e,a){m(r=>({...r,[e]:a}))}async function y(){if(p(!0),g(null),u.password!==u.password_confirmation){g("Password confirmation does not match"),p(!1);return}try{let e={email:u.email,role:u.role,first_name:u.first_name,last_name:u.last_name,phone:u.phone,password:u.password,password_confirmation:u.password_confirmation},a=await n(e);l("User created successfully"),s(a),t()}catch(e){d(e.message||"Create user failed")}finally{p(!1)}}return((0,r.useEffect)(()=>{e&&(m({first_name:"",last_name:"",email:"",phone:"",role:"staff",password:"",password_confirmation:""}),g(null))},[e]),e)?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,a.jsxs)("div",{className:"w-full max-w-lg rounded-2xl bg-white p-6 shadow dark:bg-gray-900",children:[(0,a.jsx)("h2",{className:"mb-4 text-lg font-semibold text-gray-800 dark:text-white",children:"Add User"}),f&&(0,a.jsx)("div",{className:"mb-4 rounded bg-red-100 px-3 py-2 text-sm text-red-700 dark:bg-red-900/30 dark:text-red-400",children:f}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(x,{label:"First name",children:(0,a.jsx)(o.default,{placeholder:"First name",onChange:e=>b("first_name",e.target.value)})}),(0,a.jsx)(x,{label:"Last name",children:(0,a.jsx)(o.default,{placeholder:"Last name",onChange:e=>b("last_name",e.target.value)})}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)(x,{label:"Email address",children:(0,a.jsx)(o.default,{type:"email",placeholder:"Email address",onChange:e=>b("email",e.target.value)})})}),(0,a.jsx)(x,{label:"Phone number",children:(0,a.jsx)(o.default,{placeholder:"Phone number",onChange:e=>b("phone",e.target.value)})}),(0,a.jsx)(x,{label:"Role",children:(0,a.jsx)(i.default,{placeholder:"Select role",options:[{label:"Admin",value:"admin"},{label:"Staff",value:"staff"},{label:"Customer",value:"user"}],onChange:e=>{("admin"===e||"staff"===e||"user"===e)&&b("role",e)}})}),(0,a.jsx)("div",{className:"col-span-2 mt-4 border-t pt-4",children:(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Set password"})}),(0,a.jsx)(x,{label:"Password",children:(0,a.jsx)(o.default,{type:"password",placeholder:"Password",onChange:e=>b("password",e.target.value)})}),(0,a.jsx)(x,{label:"Confirm password",children:(0,a.jsx)(o.default,{type:"password",placeholder:"Confirm password",onChange:e=>b("password_confirmation",e.target.value)})})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:t,className:"rounded-lg border px-4 py-2 text-sm",disabled:h,children:"Cancel"}),(0,a.jsx)("button",{onClick:y,disabled:h,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-medium text-white hover:bg-brand-700 disabled:opacity-50",children:h?"Creating...":"Create User"})]})]})}):null}function x({label:e,children:r}){return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e}),r]})}function m({open:e,user:t,onClose:s,onUpdated:l}){let[n,d]=(0,r.useState)({email:"",role:"",first_name:"",last_name:"",phone:"",password:"",password_confirmation:""});function u(e,a){d(r=>({...r,[e]:a}))}async function x(){let{showSuccess:e,showError:a}=(0,c.useToast)(),r=localStorage.getItem("token");if(!r)return void alert("Unauthorized");let d={email:n.email,role:n.role,first_name:n.first_name,last_name:n.last_name,phone:n.phone};n.password&&(d.password=n.password,d.password_confirmation=n.password_confirmation);let o=await fetch(`http://localhost:3001/api/users/${t.id}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({user:d})}),i=await o.json().catch(()=>({}));o.ok?(e("User updated successfully âœ…"),l(i),s()):a(i.errors?.join(", ")||"Update failed")}return((0,r.useEffect)(()=>{e&&t&&d({email:t.email||"",role:t.role||"",first_name:t.first_name||"",last_name:t.last_name||"",phone:t.phone||"",password:"",password_confirmation:""})},[t,e]),e)?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,a.jsxs)("div",{className:"w-full max-w-lg rounded-2xl bg-white p-6 shadow dark:bg-gray-900",children:[(0,a.jsx)("h2",{className:"mb-4 text-lg font-semibold text-gray-800 dark:text-white",children:"Edit User"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(h,{label:"First name",children:(0,a.jsx)(o.default,{defaultValue:n.first_name,onChange:e=>u("first_name",e.target.value)})}),(0,a.jsx)(h,{label:"Last name",children:(0,a.jsx)(o.default,{defaultValue:n.last_name,onChange:e=>u("last_name",e.target.value)})}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)(h,{label:"Email address",children:(0,a.jsx)(o.default,{defaultValue:n.email,onChange:e=>u("email",e.target.value)})})}),(0,a.jsx)(h,{label:"Phone number",children:(0,a.jsx)(o.default,{defaultValue:n.phone,onChange:e=>u("phone",e.target.value)})}),(0,a.jsx)(h,{label:"Role",children:(0,a.jsx)(i.default,{defaultValue:n.role,options:[{label:"Admin",value:"admin"},{label:"Staff",value:"staff"},{label:"Customer",value:"user"}],onChange:e=>{("admin"===e||"staff"===e||"user"===e)&&u("role",e)}})}),(0,a.jsxs)("div",{className:"col-span-2 mt-4 border-t pt-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Change password"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Leave blank to keep current password"})]}),(0,a.jsx)(h,{label:"New password",children:(0,a.jsx)(o.default,{type:"password",onChange:e=>u("password",e.target.value)})}),(0,a.jsx)(h,{label:"Confirm password",children:(0,a.jsx)(o.default,{type:"password",onChange:e=>u("password_confirmation",e.target.value)})})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:s,className:"rounded-lg border px-4 py-2 text-sm",children:"Cancel"}),(0,a.jsx)("button",{onClick:x,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-medium text-white",children:"Save Changes"})]})]})}):null}function h({label:e,children:r}){return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e}),r]})}function p(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!1),[o,i]=(0,r.useState)(null);async function c(e){confirm("Are you sure you want to delete this user?")&&(await d(e),t(a=>a.filter(a=>a.id!==e)))}return(0,r.useEffect)(()=>{l().then(t)},[]),(0,a.jsxs)("div",{className:"rounded-2xl bg-white p-6 shadow dark:bg-gray-900",children:[(0,a.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"User Management"}),(0,a.jsx)("button",{onClick:()=>n(!0),className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-medium text-white hover:bg-brand-700",children:"+ Add User"})]}),(0,a.jsx)("div",{className:"overflow-hidden rounded-xl border border-gray-200 dark:border-gray-800",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase",children:"Email"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase",children:"Role"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:0===e.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:3,className:"px-4 py-8 text-center text-gray-500",children:"No users found"})}):e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:e.email}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:e.role}),(0,a.jsx)("td",{className:"px-4 py-3 text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:()=>i(e),className:"rounded-lg bg-blue-50 px-3 py-1 text-xs text-blue-600",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>c(e.id),className:"rounded-lg bg-red-50 px-3 py-1 text-xs text-red-600",children:"Delete"})]})})]},e.id))})]})}),(0,a.jsx)(u,{open:s,onClose:()=>n(!1),onCreated:e=>t(a=>[...a,e])}),o&&(0,a.jsx)(m,{open:!!o,user:o,onClose:()=>i(null),onUpdated:e=>t(a=>a.map(a=>a.id===e.id?e:a))})]})}e.s(["default",()=>p],40309)}]);
{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/ndphong4/Documents/Learning-Ruby/test/Learn/bakery-webapp/bakery-admin-frontend/src/lib/users.ts"],"sourcesContent":["// lib/users.ts\nconst API_BASE = \"http://localhost:3001\";\n\nexport async function getUsers() {\n  const res = await fetch(`${API_BASE}/api/users`, {\n    credentials: \"include\",\n  });\n\n  if (!res.ok) {\n    throw new Error(\"Failed to fetch users\");\n  }\n\n  const data = await res.json();\n  return data.users;\n}\n\n\nexport async function deleteUser(id: number) {\n  const res = await fetch(`${API_BASE}/api/users/${id}`, {\n    method: \"DELETE\",\n    credentials: \"include\",\n  });\n\n  if (!res.ok) {\n    throw new Error(\"Failed to delete user\");\n  }\n}\n\nexport async function createUser(data: {\n  email: string;\n  password: string;\n  role: string;\n}) {\n  const res = await fetch(\"http://localhost:3001/api/users\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    credentials: \"include\",\n    body: JSON.stringify({\n      email: data.email,\n      password: data.password,\n      password_confirmation: data.password, // ðŸ”¥ QUAN TRá»ŒNG\n      role: data.role,\n    }),\n  });\n\n  if (!res.ok) {\n    const result = await res.json();\n    throw new Error(result.errors?.join(\", \") || \"Create user failed\");\n  }\n\n  return res.json();\n}"],"names":[],"mappings":"AAAA,eAAe;;;;;;;;;AACf,MAAM,WAAW;AAEV,eAAe;IACpB,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,UAAU,CAAC,EAAE;QAC/C,aAAa;IACf;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,OAAO,KAAK,KAAK;AACnB;AAGO,eAAe,WAAW,EAAU;IACzC,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,WAAW,EAAE,IAAI,EAAE;QACrD,QAAQ;QACR,aAAa;IACf;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,IAAI,MAAM;IAClB;AACF;AAEO,eAAe,WAAW,IAIhC;IACC,MAAM,MAAM,MAAM,MAAM,mCAAmC;QACzD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,aAAa;QACb,MAAM,KAAK,SAAS,CAAC;YACnB,OAAO,KAAK,KAAK;YACjB,UAAU,KAAK,QAAQ;YACvB,uBAAuB,KAAK,QAAQ;YACpC,MAAM,KAAK,IAAI;QACjB;IACF;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,SAAS,MAAM,IAAI,IAAI;QAC7B,MAAM,IAAI,MAAM,OAAO,MAAM,EAAE,KAAK,SAAS;IAC/C;IAEA,OAAO,IAAI,IAAI;AACjB"}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["file:///home/ndphong4/Documents/Learning-Ruby/test/Learn/bakery-webapp/bakery-admin-frontend/src/components/admin/AddUserModel.tsx"],"sourcesContent":["\"use client\";\n\nimport React, {  useState } from \"react\";\nimport { createUser } from \"@/lib/users\";\nimport { useRouter } from \"next/navigation\";\n\ntype Props = {\n  open: boolean;\n  onClose: () => void;\n  onCreated: (user: any) => void;\n};\n\nexport default function AddUserModal({ open, onClose, onCreated }: Props) {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [role, setRole] = useState(\"user\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const[success, setSuccess] = useState(false);\n  const router = useRouter();\n  if (!open) return null;\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n  \n    try {\n      const res = await createUser({ email, password, role });\n  \n      onCreated(res.user); // refresh list\n      setSuccess(true);    // âœ… chá»‰ set khi thÃ nh cÃ´ng\n  \n      // reset form (OK lÃ m á»Ÿ Ä‘Ã¢y)\n      setEmail(\"\");\n      setPassword(\"\");\n      setRole(\"user\");\n    } catch (err: any) {\n      setError(err.message || \"Create user failed\");\n    } finally {\n      setLoading(false);\n    }\n  }\n  \n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\n      <div className=\"w-full max-w-md rounded-xl bg-white dark:bg-gray-900 p-6 shadow-lg\">\n        <h2 className=\"text-lg font-semibold mb-4\">Add User</h2>\n\n        {error && (\n          <div className=\"mb-3 rounded bg-red-100 text-red-700 px-3 py-2 text-sm\">\n            {error}\n          </div>\n        )}\n        {success && (\n            <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40\">\n                <div className=\"w-full max-w-sm rounded-lg bg-white p-6 shadow-lg dark:bg-gray-900\">\n                <h2 className=\"mb-2 text-lg font-semibold\">\n                    ðŸŽ‰ ThÃ nh cÃ´ng\n                </h2>\n                <p className=\"mb-4 text-sm text-gray-600 dark:text-gray-400\">\n                    User Ä‘Ã£ Ä‘Æ°á»£c táº¡o thÃ nh cÃ´ng.\n                </p>\n\n                <button\n                    onClick={() => {\n                    setSuccess(false);\n                    onClose();\n                    }}\n                    className=\"w-full rounded-lg bg-brand-500 px-4 py-2 text-white hover:bg-brand-600\"\n                >\n                    OK\n                </button>\n                </div>\n            </div>\n        )}\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm mb-1\">Email</label>\n            <input\n              type=\"email\"\n              required\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              className=\"w-full rounded border px-3 py-2 dark:bg-gray-800\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm mb-1\">Password</label>\n            <input\n              type=\"password\"\n              required\n              minLength={6}\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              className=\"w-full rounded border px-3 py-2 dark:bg-gray-800\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm mb-1\">Role</label>\n            <select\n              value={role}\n              onChange={(e) => setRole(e.target.value)}\n              className=\"w-full rounded border px-3 py-2 dark:bg-gray-800\"\n            >\n              <option value=\"user\">User</option>\n              <option value=\"admin\">Admin</option>\n              <option value=\"super_admin\">Super Admin</option>\n            </select>\n          </div>\n\n          <div className=\"flex justify-end gap-2 pt-4\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 rounded border\"\n              disabled={loading}\n            >\n              Cancel\n            </button>\n\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50\"\n            >\n              {loading ? \"Creating...\" : \"Create\"}\n              \n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAYe,SAAS,aAAa,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAS;IACtE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAK,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACtC,MAAM,SAAS,IAAA,+IAAS;IACxB,IAAI,CAAC,MAAM,OAAO;IAElB,eAAe,aAAa,CAAkB;QAC5C,EAAE,cAAc;QAChB,WAAW;QACX,SAAS;QAET,IAAI;YACF,MAAM,MAAM,MAAM,IAAA,iIAAU,EAAC;gBAAE;gBAAO;gBAAU;YAAK;YAErD,UAAU,IAAI,IAAI,GAAG,eAAe;YACpC,WAAW,OAAU,2BAA2B;YAEhD,4BAA4B;YAC5B,SAAS;YACT,YAAY;YACZ,QAAQ;QACV,EAAE,OAAO,KAAU;YACjB,SAAS,IAAI,OAAO,IAAI;QAC1B,SAAU;YACR,WAAW;QACb;IACF;IAGA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAA6B;;;;;;gBAE1C,uBACC,8OAAC;oBAAI,WAAU;8BACZ;;;;;;gBAGJ,yBACG,8OAAC;oBAAI,WAAU;8BACX,cAAA,8OAAC;wBAAI,WAAU;;0CACf,8OAAC;gCAAG,WAAU;0CAA6B;;;;;;0CAG3C,8OAAC;gCAAE,WAAU;0CAAgD;;;;;;0CAI7D,8OAAC;gCACG,SAAS;oCACT,WAAW;oCACX;gCACA;gCACA,WAAU;0CACb;;;;;;;;;;;;;;;;;8BAOT,8OAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACtC,8OAAC;;8CACC,8OAAC;oCAAM,WAAU;8CAAqB;;;;;;8CACtC,8OAAC;oCACC,MAAK;oCACL,QAAQ;oCACR,OAAO;oCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oCACxC,WAAU;;;;;;;;;;;;sCAId,8OAAC;;8CACC,8OAAC;oCAAM,WAAU;8CAAqB;;;;;;8CACtC,8OAAC;oCACC,MAAK;oCACL,QAAQ;oCACR,WAAW;oCACX,OAAO;oCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oCAC3C,WAAU;;;;;;;;;;;;sCAId,8OAAC;;8CACC,8OAAC;oCAAM,WAAU;8CAAqB;;;;;;8CACtC,8OAAC;oCACC,OAAO;oCACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;oCACvC,WAAU;;sDAEV,8OAAC;4CAAO,OAAM;sDAAO;;;;;;sDACrB,8OAAC;4CAAO,OAAM;sDAAQ;;;;;;sDACtB,8OAAC;4CAAO,OAAM;sDAAc;;;;;;;;;;;;;;;;;;sCAIhC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,MAAK;oCACL,SAAS;oCACT,WAAU;oCACV,UAAU;8CACX;;;;;;8CAID,8OAAC;oCACC,MAAK;oCACL,UAAU;oCACV,WAAU;8CAET,UAAU,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQzC"}},
    {"offset": {"line": 328, "column": 0}, "map": {"version":3,"sources":["file:///home/ndphong4/Documents/Learning-Ruby/test/Learn/bakery-webapp/bakery-admin-frontend/src/app/admin/%28others-pages%29/%28user%29/users/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { getUsers,deleteUser} from \"@/lib/users\";\nimport AddUserModal from \"@/components/admin/AddUserModel\";\n\nexport default function UsersPage() {\n  const [users, setUsers] = useState<any[]>([]);\n  const [openAdd, setOpenAdd] = useState(false);\n\n  useEffect(() => {\n    console.log(\"ðŸ”¥ USERS PAGE MOUNTED\");\n  \n    getUsers().then((data) => {\n      console.log(\"ðŸ”¥ USERS API DATA:\", data);\n      setUsers(Array.isArray(data) ? data : data?.users || []);\n    });\n  }, []);\n\n  return (\n    <div className=\"bg-white dark:bg-gray-900 p-6 rounded-xl shadow\">\n      <h1 className=\"text-xl font-semibold mb-4\">User Management</h1>\n      <button\n            onClick={() => setOpenAdd(true)}\n            className=\"rounded bg-green-600 px-4 py-2 text-white hover:bg-green-700\"\n        >\n            + Add User\n        </button>\n        <AddUserModal\n        open={openAdd}\n        onClose={() => setOpenAdd(false)}\n        onCreated={(newUser) => setUsers((prev) => [...prev, newUser])}\n        />\n      <table className=\"w-full border\">\n        <thead>\n          <tr className=\"bg-gray-100 dark:bg-gray-800\">\n            <th className=\"p-2 text-left\">Email</th>\n            <th className=\"p-2 text-left\">Role</th>\n            <th className=\"p-2\">Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {users.length === 0 && (\n            <tr>\n              <td colSpan={3} className=\"p-4 text-center\">\n                No users\n              </td>\n            </tr>\n          )}\n\n          {users.map((u) => (\n            <tr key={u.id} className=\"border-b\">\n              <td className=\"p-2\">{u.email}</td>\n              <td className=\"p-2\">{u.role}</td>\n              <td className=\"p-2 text-center\">\n                <button\n                  onClick={() =>\n                    deleteUser(u.id).then(() =>\n                      setUsers(users.filter((x) => x.id !== u.id))\n                    )\n                  }\n                  className=\"text-red-500 hover:underline\"\n                >\n                  Delete\n                </button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAQ,EAAE;IAC5C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,QAAQ,GAAG,CAAC;QAEZ,IAAA,+HAAQ,IAAG,IAAI,CAAC,CAAC;YACf,QAAQ,GAAG,CAAC,sBAAsB;YAClC,SAAS,MAAM,OAAO,CAAC,QAAQ,OAAO,MAAM,SAAS,EAAE;QACzD;IACF,GAAG,EAAE;IAEL,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAA6B;;;;;;0BAC3C,8OAAC;gBACK,SAAS,IAAM,WAAW;gBAC1B,WAAU;0BACb;;;;;;0BAGD,8OAAC,sJAAY;gBACb,MAAM;gBACN,SAAS,IAAM,WAAW;gBAC1B,WAAW,CAAC,UAAY,SAAS,CAAC,OAAS;+BAAI;4BAAM;yBAAQ;;;;;;0BAE/D,8OAAC;gBAAM,WAAU;;kCACf,8OAAC;kCACC,cAAA,8OAAC;4BAAG,WAAU;;8CACZ,8OAAC;oCAAG,WAAU;8CAAgB;;;;;;8CAC9B,8OAAC;oCAAG,WAAU;8CAAgB;;;;;;8CAC9B,8OAAC;oCAAG,WAAU;8CAAM;;;;;;;;;;;;;;;;;kCAGxB,8OAAC;;4BACE,MAAM,MAAM,KAAK,mBAChB,8OAAC;0CACC,cAAA,8OAAC;oCAAG,SAAS;oCAAG,WAAU;8CAAkB;;;;;;;;;;;4BAM/C,MAAM,GAAG,CAAC,CAAC,kBACV,8OAAC;oCAAc,WAAU;;sDACvB,8OAAC;4CAAG,WAAU;sDAAO,EAAE,KAAK;;;;;;sDAC5B,8OAAC;4CAAG,WAAU;sDAAO,EAAE,IAAI;;;;;;sDAC3B,8OAAC;4CAAG,WAAU;sDACZ,cAAA,8OAAC;gDACC,SAAS,IACP,IAAA,iIAAU,EAAC,EAAE,EAAE,EAAE,IAAI,CAAC,IACpB,SAAS,MAAM,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,EAAE,EAAE;gDAG9C,WAAU;0DACX;;;;;;;;;;;;mCAXI,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;;;;AAqBzB"}}]
}
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,89504,e=>{"use strict";var a=e.i(43476);e.s(["default",0,({type:e="text",id:r,name:s,placeholder:t,defaultValue:l,onChange:n,className:d="",min:o,max:i,step:c,disabled:u=!1,success:x=!1,error:m=!1,hint:h})=>{let p=`h-11 w-full rounded-lg border appearance-none px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800 ${d}`;return u?p+=" text-gray-500 border-gray-300 cursor-not-allowed dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700":m?p+=" text-error-800 border-error-500 focus:ring-3 focus:ring-error-500/10  dark:text-error-400 dark:border-error-500":x?p+=" text-success-500 border-success-400 focus:ring-success-500/10 focus:border-success-300  dark:text-success-400 dark:border-success-500":p+=" bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800",(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:e,id:r,name:s,placeholder:t,defaultValue:l,onChange:n,min:o,max:i,step:c,disabled:u,className:p}),h&&(0,a.jsx)("p",{className:`mt-1.5 text-xs ${m?"text-error-500":x?"text-success-500":"text-gray-500"}`,children:h})]})}])},14080,e=>{"use strict";var a=e.i(43476),r=e.i(71645);e.s(["default",0,({options:e,placeholder:s="Select an option",onChange:t,className:l="",defaultValue:n=""})=>{let[d,o]=(0,r.useState)(n);return(0,a.jsxs)("select",{className:`h-11 w-full appearance-none rounded-lg border border-gray-300  px-4 py-2.5 pr-11 text-sm shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800 ${d?"text-gray-800 dark:text-white/90":"text-gray-400 dark:text-gray-400"} ${l}`,value:d,onChange:e=>{let a=e.target.value;o(a),t(a)},children:[(0,a.jsx)("option",{value:"",disabled:!0,className:"text-gray-700 dark:bg-gray-900 dark:text-gray-400",children:s}),e.map(e=>(0,a.jsx)("option",{value:e.value,className:"text-gray-700 dark:bg-gray-900 dark:text-gray-400",children:e.label},e.value))]})}])},40309,e=>{"use strict";var a=e.i(43476),r=e.i(71645);let s="http://localhost:3001/api";function t(){let e=localStorage.getItem("token");if(!e)throw Error("No auth token");return{"Content-Type":"application/json",Authorization:`Bearer ${e}`}}async function l(){try{let e=await fetch(`${s}/users`,{headers:t()}),a=await e.json();if(console.log("ðŸ”¥ /api/users response:",a),!e.ok)return console.error("GET USERS FAILED:",a),[];if(Array.isArray(a))return a;if(Array.isArray(a.users))return a.users;return console.warn("âš ï¸ Unexpected users response shape:",a),[]}catch(e){return console.error("GET USERS ERROR:",e),[]}}async function n(e){let a=await fetch(`${s}/users`,{method:"POST",headers:t(),body:JSON.stringify({email:e.email,password:e.password,password_confirmation:e.password,role:e.role})}),r=await a.json();if(!a.ok)throw Error(r.errors?.join(", ")||"Create user failed");return r}async function d(e){if(!(await fetch(`${s}/users/${e}`,{method:"DELETE",headers:t()})).ok)throw Error("Failed to delete user")}var o=e.i(89504),i=e.i(14080);function c({open:e,onClose:s,onCreated:t}){let[l,d]=(0,r.useState)({first_name:"",last_name:"",email:"",phone:"",role:"staff",password:"",password_confirmation:""}),[c,x]=(0,r.useState)(!1),[m,h]=(0,r.useState)(null);function p(e,a){d(r=>({...r,[e]:a}))}async function f(){if(x(!0),h(null),l.password!==l.password_confirmation){h("Password confirmation does not match"),x(!1);return}try{let e={email:l.email,role:l.role,first_name:l.first_name,last_name:l.last_name,phone:l.phone,password:l.password,password_confirmation:l.password_confirmation},a=await n(e);t(a.user),s()}catch(e){h(e.message||"Create user failed")}finally{x(!1)}}return((0,r.useEffect)(()=>{e&&(d({first_name:"",last_name:"",email:"",phone:"",role:"staff",password:"",password_confirmation:""}),h(null))},[e]),e)?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,a.jsxs)("div",{className:"w-full max-w-lg rounded-2xl bg-white p-6 shadow dark:bg-gray-900",children:[(0,a.jsx)("h2",{className:"mb-4 text-lg font-semibold text-gray-800 dark:text-white",children:"Add User"}),m&&(0,a.jsx)("div",{className:"mb-4 rounded bg-red-100 px-3 py-2 text-sm text-red-700 dark:bg-red-900/30 dark:text-red-400",children:m}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(u,{label:"First name",children:(0,a.jsx)(o.default,{placeholder:"First name",onChange:e=>p("first_name",e.target.value)})}),(0,a.jsx)(u,{label:"Last name",children:(0,a.jsx)(o.default,{placeholder:"Last name",onChange:e=>p("last_name",e.target.value)})}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)(u,{label:"Email address",children:(0,a.jsx)(o.default,{type:"email",placeholder:"Email address",onChange:e=>p("email",e.target.value)})})}),(0,a.jsx)(u,{label:"Phone number",children:(0,a.jsx)(o.default,{placeholder:"Phone number",onChange:e=>p("phone",e.target.value)})}),(0,a.jsx)(u,{label:"Role",children:(0,a.jsx)(i.default,{placeholder:"Select role",options:[{label:"Admin",value:"admin"},{label:"Staff",value:"staff"},{label:"Customer",value:"user"}],onChange:e=>p("role",e)})}),(0,a.jsx)("div",{className:"col-span-2 mt-4 border-t pt-4",children:(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Set password"})}),(0,a.jsx)(u,{label:"Password",children:(0,a.jsx)(o.default,{type:"password",placeholder:"Password",onChange:e=>p("password",e.target.value)})}),(0,a.jsx)(u,{label:"Confirm password",children:(0,a.jsx)(o.default,{type:"password",placeholder:"Confirm password",onChange:e=>p("password_confirmation",e.target.value)})})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:s,className:"rounded-lg border px-4 py-2 text-sm",disabled:c,children:"Cancel"}),(0,a.jsx)("button",{onClick:f,disabled:c,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-medium text-white hover:bg-brand-700 disabled:opacity-50",children:c?"Creating...":"Create User"})]})]})}):null}function u({label:e,children:r}){return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e}),r]})}function x({open:e,user:s,onClose:t,onUpdated:l}){let[n,d]=(0,r.useState)({email:"",role:"",first_name:"",last_name:"",phone:"",password:"",password_confirmation:""});function c(e,a){d(r=>({...r,[e]:a}))}async function u(){let e={email:n.email,role:n.role,first_name:n.first_name,last_name:n.last_name,phone:n.phone};n.password&&(e.password=n.password,e.password_confirmation=n.password_confirmation);let a=await fetch(`http://localhost:3001/api/users/${s.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}),r=await a.json();a.ok?(l(r),t()):alert(r.errors?.join(", ")||"Update failed")}return((0,r.useEffect)(()=>{e&&s&&d({email:s.email||"",role:s.role||"",first_name:s.first_name||"",last_name:s.last_name||"",phone:s.phone||"",password:"",password_confirmation:""})},[s,e]),e)?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,a.jsxs)("div",{className:"w-full max-w-lg rounded-2xl bg-white p-6 shadow dark:bg-gray-900",children:[(0,a.jsx)("h2",{className:"mb-4 text-lg font-semibold text-gray-800 dark:text-white",children:"Edit User"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(m,{label:"First name",children:(0,a.jsx)(o.default,{defaultValue:n.first_name,onChange:e=>c("first_name",e.target.value)})}),(0,a.jsx)(m,{label:"Last name",children:(0,a.jsx)(o.default,{defaultValue:n.last_name,onChange:e=>c("last_name",e.target.value)})}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)(m,{label:"Email address",children:(0,a.jsx)(o.default,{defaultValue:n.email,onChange:e=>c("email",e.target.value)})})}),(0,a.jsx)(m,{label:"Phone number",children:(0,a.jsx)(o.default,{defaultValue:n.phone,onChange:e=>c("phone",e.target.value)})}),(0,a.jsx)(m,{label:"Role",children:(0,a.jsx)(i.default,{defaultValue:n.role,options:[{label:"Admin",value:"admin"},{label:"Staff",value:"staff"},{label:"Customer",value:"user"}],onChange:e=>c("role",e)})}),(0,a.jsxs)("div",{className:"col-span-2 mt-4 border-t pt-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Change password"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Leave blank to keep current password"})]}),(0,a.jsx)(m,{label:"New password",children:(0,a.jsx)(o.default,{type:"password",defaultValue:n.password,onChange:e=>c("password",e.target.value)})}),(0,a.jsx)(m,{label:"Confirm password",children:(0,a.jsx)(o.default,{type:"password",defaultValue:n.password_confirmation,onChange:e=>c("password_confirmation",e.target.value)})})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:t,className:"rounded-lg border px-4 py-2 text-sm",children:"Cancel"}),(0,a.jsx)("button",{onClick:u,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-medium text-white",children:"Save Changes"})]})]})}):null}function m({label:e,children:r}){return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e}),r]})}function h(){let[e,s]=(0,r.useState)([]),[t,n]=(0,r.useState)(!1),[o,i]=(0,r.useState)(null);async function u(e){confirm("Are you sure you want to delete this user?")&&(await d(e),s(a=>a.filter(a=>a.id!==e)))}return(0,r.useEffect)(()=>{l().then(s)},[]),(0,a.jsxs)("div",{className:"rounded-2xl bg-white p-6 shadow dark:bg-gray-900",children:[(0,a.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"User Management"}),(0,a.jsx)("button",{onClick:()=>n(!0),className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-medium text-white hover:bg-brand-700",children:"+ Add User"})]}),(0,a.jsx)("div",{className:"overflow-hidden rounded-xl border border-gray-200 dark:border-gray-800",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase",children:"Email"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase",children:"Role"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:0===e.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:3,className:"px-4 py-8 text-center text-gray-500",children:"No users found"})}):e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:e.email}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:e.role}),(0,a.jsx)("td",{className:"px-4 py-3 text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:()=>i(e),className:"rounded-lg bg-blue-50 px-3 py-1 text-xs text-blue-600",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>u(e.id),className:"rounded-lg bg-red-50 px-3 py-1 text-xs text-red-600",children:"Delete"})]})})]},e.id))})]})}),(0,a.jsx)(c,{open:t,onClose:()=>n(!1),onCreated:e=>s(a=>[...a,e])}),o&&(0,a.jsx)(x,{open:!!o,user:o,onClose:()=>i(null),onUpdated:e=>s(a=>a.map(a=>a.id===e.id?e:a))})]})}e.s(["default",()=>h],40309)}]);
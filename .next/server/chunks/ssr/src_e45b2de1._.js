module.exports=[39323,a=>{"use strict";var b=a.i(87924);a.s(["default",0,({type:a="text",className:c="",disabled:d=!1,success:e=!1,error:f=!1,hint:g,...h})=>{let i=`h-11 w-full rounded-lg border appearance-none px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800 ${c}`;return d?i+=" text-gray-500 border-gray-300 cursor-not-allowed dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700":f?i+=" text-error-800 border-error-500 focus:ring-error-500/10 dark:text-error-400 dark:border-error-500":e?i+=" text-success-500 border-success-400 focus:ring-success-500/10 dark:text-success-400 dark:border-success-500":i+=" bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800",(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:a,disabled:d,className:i,...h}),g&&(0,b.jsx)("p",{className:`mt-1.5 text-xs ${f?"text-error-500":e?"text-success-500":"text-gray-500"}`,children:g})]})}])},81538,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.s(["default",0,({options:a,placeholder:d="Select an option",onChange:e,className:f="",defaultValue:g=""})=>{let[h,i]=(0,c.useState)(g);return(0,b.jsxs)("select",{className:`h-11 w-full appearance-none rounded-lg border border-gray-300  px-4 py-2.5 pr-11 text-sm shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800 ${h?"text-gray-800 dark:text-white/90":"text-gray-400 dark:text-gray-400"} ${f}`,value:h,onChange:a=>{let b=a.target.value;i(b),e(b)},children:[(0,b.jsx)("option",{value:"",disabled:!0,className:"text-gray-700 dark:bg-gray-900 dark:text-gray-400",children:d}),a.map(a=>(0,b.jsx)("option",{value:a.value,className:"text-gray-700 dark:bg-gray-900 dark:text-gray-400",children:a.label},a.value))]})}])},90091,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d="http://localhost:3001/api";function e(){let a=localStorage.getItem("token");if(!a)throw Error("No auth token");return{"Content-Type":"application/json",Authorization:`Bearer ${a}`}}async function f(){try{let a=await fetch(`${d}/users`,{headers:e()}),b=await a.json();if(console.log("ðŸ”¥ /api/users response:",b),!a.ok)return console.error("GET USERS FAILED:",b),[];if(Array.isArray(b))return b;if(Array.isArray(b.users))return b.users;return console.warn("âš ï¸ Unexpected users response shape:",b),[]}catch(a){return console.error("GET USERS ERROR:",a),[]}}async function g(a){let b=localStorage.getItem("token"),c=await fetch("http://localhost:3001/api/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({user:a})});if(!c.ok){let a=await c.json();throw Error(a.errors?.join(", ")||"Create user failed")}return c.json()}async function h(a){if(!(await fetch(`${d}/users/${a}`,{method:"DELETE",headers:e()})).ok)throw Error("Failed to delete user")}var i=a.i(39323),j=a.i(81538),k=a.i(66632);function l({open:a,onClose:d,onCreated:e}){let{showSuccess:f,showError:h}=(0,k.useToast)(),[l,n]=(0,c.useState)({first_name:"",last_name:"",email:"",phone:"",role:"staff",password:"",password_confirmation:""}),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(null);function s(a,b){n(c=>({...c,[a]:b}))}async function t(){if(p(!0),r(null),l.password!==l.password_confirmation){r("Password confirmation does not match"),p(!1);return}try{let a={email:l.email,role:l.role,first_name:l.first_name,last_name:l.last_name,phone:l.phone,password:l.password,password_confirmation:l.password_confirmation},b=await g(a);f("User created successfully"),e(b),d()}catch(a){h(a.message||"Create user failed")}finally{p(!1)}}return((0,c.useEffect)(()=>{a&&(n({first_name:"",last_name:"",email:"",phone:"",role:"staff",password:"",password_confirmation:""}),r(null))},[a]),a)?(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,b.jsxs)("div",{className:"w-full max-w-lg rounded-2xl bg-white p-6 shadow dark:bg-gray-900",children:[(0,b.jsx)("h2",{className:"mb-4 text-lg font-semibold text-gray-800 dark:text-white",children:"Add User"}),q&&(0,b.jsx)("div",{className:"mb-4 rounded bg-red-100 px-3 py-2 text-sm text-red-700 dark:bg-red-900/30 dark:text-red-400",children:q}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(m,{label:"First name",children:(0,b.jsx)(i.default,{placeholder:"First name",onChange:a=>s("first_name",a.target.value)})}),(0,b.jsx)(m,{label:"Last name",children:(0,b.jsx)(i.default,{placeholder:"Last name",onChange:a=>s("last_name",a.target.value)})}),(0,b.jsx)("div",{className:"col-span-2",children:(0,b.jsx)(m,{label:"Email address",children:(0,b.jsx)(i.default,{type:"email",placeholder:"Email address",onChange:a=>s("email",a.target.value)})})}),(0,b.jsx)(m,{label:"Phone number",children:(0,b.jsx)(i.default,{placeholder:"Phone number",onChange:a=>s("phone",a.target.value)})}),(0,b.jsx)(m,{label:"Role",children:(0,b.jsx)(j.default,{placeholder:"Select role",options:[{label:"Admin",value:"admin"},{label:"Staff",value:"staff"},{label:"Customer",value:"user"}],onChange:a=>{("admin"===a||"staff"===a||"user"===a)&&s("role",a)}})}),(0,b.jsx)("div",{className:"col-span-2 mt-4 border-t pt-4",children:(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Set password"})}),(0,b.jsx)(m,{label:"Password",children:(0,b.jsx)(i.default,{type:"password",placeholder:"Password",onChange:a=>s("password",a.target.value)})}),(0,b.jsx)(m,{label:"Confirm password",children:(0,b.jsx)(i.default,{type:"password",placeholder:"Confirm password",onChange:a=>s("password_confirmation",a.target.value)})})]}),(0,b.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:d,className:"rounded-lg border px-4 py-2 text-sm",disabled:o,children:"Cancel"}),(0,b.jsx)("button",{onClick:t,disabled:o,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-medium text-white hover:bg-brand-700 disabled:opacity-50",children:o?"Creating...":"Create User"})]})]})}):null}function m({label:a,children:c}){return(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a}),c]})}function n({open:a,user:d,onClose:e,onUpdated:f}){let[g,h]=(0,c.useState)({email:"",role:"",first_name:"",last_name:"",phone:"",password:"",password_confirmation:""});function l(a,b){h(c=>({...c,[a]:b}))}async function m(){let{showSuccess:a,showError:b}=(0,k.useToast)(),c=localStorage.getItem("token");if(!c)return void alert("Unauthorized");let h={email:g.email,role:g.role,first_name:g.first_name,last_name:g.last_name,phone:g.phone};g.password&&(h.password=g.password,h.password_confirmation=g.password_confirmation);let i=await fetch(`http://localhost:3001/api/users/${d.id}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({user:h})}),j=await i.json().catch(()=>({}));i.ok?(a("User updated successfully âœ…"),f(j),e()):b(j.errors?.join(", ")||"Update failed")}return((0,c.useEffect)(()=>{a&&d&&h({email:d.email||"",role:d.role||"",first_name:d.first_name||"",last_name:d.last_name||"",phone:d.phone||"",password:"",password_confirmation:""})},[d,a]),a)?(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,b.jsxs)("div",{className:"w-full max-w-lg rounded-2xl bg-white p-6 shadow dark:bg-gray-900",children:[(0,b.jsx)("h2",{className:"mb-4 text-lg font-semibold text-gray-800 dark:text-white",children:"Edit User"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(o,{label:"First name",children:(0,b.jsx)(i.default,{defaultValue:g.first_name,onChange:a=>l("first_name",a.target.value)})}),(0,b.jsx)(o,{label:"Last name",children:(0,b.jsx)(i.default,{defaultValue:g.last_name,onChange:a=>l("last_name",a.target.value)})}),(0,b.jsx)("div",{className:"col-span-2",children:(0,b.jsx)(o,{label:"Email address",children:(0,b.jsx)(i.default,{defaultValue:g.email,onChange:a=>l("email",a.target.value)})})}),(0,b.jsx)(o,{label:"Phone number",children:(0,b.jsx)(i.default,{defaultValue:g.phone,onChange:a=>l("phone",a.target.value)})}),(0,b.jsx)(o,{label:"Role",children:(0,b.jsx)(j.default,{defaultValue:g.role,options:[{label:"Admin",value:"admin"},{label:"Staff",value:"staff"},{label:"Customer",value:"user"}],onChange:a=>{("admin"===a||"staff"===a||"user"===a)&&l("role",a)}})}),(0,b.jsxs)("div",{className:"col-span-2 mt-4 border-t pt-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Change password"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Leave blank to keep current password"})]}),(0,b.jsx)(o,{label:"New password",children:(0,b.jsx)(i.default,{type:"password",onChange:a=>l("password",a.target.value)})}),(0,b.jsx)(o,{label:"Confirm password",children:(0,b.jsx)(i.default,{type:"password",onChange:a=>l("password_confirmation",a.target.value)})})]}),(0,b.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:e,className:"rounded-lg border px-4 py-2 text-sm",children:"Cancel"}),(0,b.jsx)("button",{onClick:m,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-medium text-white",children:"Save Changes"})]})]})}):null}function o({label:a,children:c}){return(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a}),c]})}function p(){let[a,d]=(0,c.useState)([]),[e,g]=(0,c.useState)(!1),[i,j]=(0,c.useState)(null);async function k(a){confirm("Are you sure you want to delete this user?")&&(await h(a),d(b=>b.filter(b=>b.id!==a)))}return(0,c.useEffect)(()=>{f().then(d)},[]),(0,b.jsxs)("div",{className:"rounded-2xl bg-white p-6 shadow dark:bg-gray-900",children:[(0,b.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,b.jsx)("h1",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"User Management"}),(0,b.jsx)("button",{onClick:()=>g(!0),className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-medium text-white hover:bg-brand-700",children:"+ Add User"})]}),(0,b.jsx)("div",{className:"overflow-hidden rounded-xl border border-gray-200 dark:border-gray-800",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase",children:"Email"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase",children:"Role"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:0===a.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:3,className:"px-4 py-8 text-center text-gray-500",children:"No users found"})}):a.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,b.jsx)("td",{className:"px-4 py-3 text-sm",children:a.email}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm",children:a.role}),(0,b.jsx)("td",{className:"px-4 py-3 text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:()=>j(a),className:"rounded-lg bg-blue-50 px-3 py-1 text-xs text-blue-600",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>k(a.id),className:"rounded-lg bg-red-50 px-3 py-1 text-xs text-red-600",children:"Delete"})]})})]},a.id))})]})}),(0,b.jsx)(l,{open:e,onClose:()=>g(!1),onCreated:a=>d(b=>[...b,a])}),i&&(0,b.jsx)(n,{open:!!i,user:i,onClose:()=>j(null),onUpdated:a=>d(b=>b.map(b=>b.id===a.id?a:b))})]})}a.s(["default",()=>p],90091)}];

//# sourceMappingURL=src_e45b2de1._.js.map